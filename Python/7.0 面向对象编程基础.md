# 7.0 面向对象编程基础  

## 类和实例 
在Python中，定义类是通过class关键字 
```python
class Student(object):
    pass
``` 

class后面紧接着是类名，即Student，类名通常是大写开头的单词，紧接着是(object)，表示该类是从哪个类继承下来的,通常，如果没有合适的继承类，就使用object类，这是所有类最终都会继承的类  

在python中，可以随时自由地给一个实例变量绑定属性，比如，给实例bart绑定一个name属性:
```python
bart.name = 'Bart Simpson'
```
可以在创建实例的时候，通过定义一个特殊的```__init__```方法，可以把一些我们认为必须绑定的属性强制填写进去。```__init__```方法的第一个参数永远是self，表示创建的实例本身  

```py
class Student(object):

    def __init__(self, name, score):
        self.name = name
        self.score = score
```
可以将```__init__```理解为java语法中的构造器    

有了```__init__```方法，在创建实例的时候，就不能传入空的参数了，必须传入与```__init__```方法匹配的参数，但self不需要传，Python解释器自己会把实例变量传进去  

> 静态语言不同，Python允许对实例变量绑定任何数据，也就是说，对于两个实例变量，虽然它们都是同一个类的不同实例，但拥有的变量名称都可能不同    

如果要让内部属性不被外部访问，可以把属性的名称前加上两个下划线```__```  
在Python中，实例的变量名如果以__开头，就变成了一个私有变量（private），只有内部可以访问，外部不能访问   
```py
class Student(object):
    def __init__(self, name, score):
        self.__name = name
        self.__score = score

    def print_score(self):
        print('%s: %s' % (self.__name, self.__score))
```

> 需要注意的是，在Python中，变量名类似__xxx__的，也就是以双下划线开头，并且以双下划线结尾的，是特殊变量，特殊变量是可以直接访问的，不是private变量  

> 有些时候，你会看到以一个下划线开头的实例变量名，比如_name，这样的实例变量外部是可以访问的，但是，按照约定俗成的规定，当你看到这样的变量时，意思就是，“虽然我可以被访问，但是，请把我视为私有变量，不要随意访问”   

## 继承和多态   
记住在python里面的继承是使用括号的，比如:   
```python
class Animal(object):
    def run(self):
        print('Animal is running...')

class Dog(Animal):
    pass

class Cat(Animal):
    pass
``` 

进行方法的覆写的时候，只需要在子类中写出同名的方法即可。比如上文的Dog就可以重新写一个```def run(self)```来覆盖父类的方法    

### 静态语言和动态语言的区别    
于静态语言（例如Java）来说，如果需要传入Animal类型，则传入的对象必须是Animal类型或者它的子类，否则，将无法调用run()方法     

对于Python这样的动态语言来说，则不一定需要传入Animal类型。我们**只需要保证传入的对象有一个run()方法**就可以了   

> 这就是动态语言的“鸭子类型”，它并不要求严格的继承体系，一个对象只要“看起来像鸭子，走起路来像鸭子”，那它就可以被看做是鸭子  

## 对象信息获取 
### 1.使用type()  
type()可以判断对象的类型    
基本类型都可以被其判断    
如果一个变量指向函数或者类，也可以用type()判断  

### 2.使用isinstance()  
isinstance()可以告诉我们，一个对象是否是某种类型或者位于某类型的父继承链上    
```py   
>>> a = Animal()
>>> d = Dog()
>>> h = Husky()
>>> isinstance(h, Husky)
True
``` 

同时，也可以判断是不是属于某些类型中的一种，如：    
```py
>>> isinstance([1, 2, 3], (list, tuple))
True
>>> isinstance((1, 2, 3), (list, tuple))
True
```

### 3.使用dir()
如果要获得一个对象的所有属性和方法，可以使用dir()函数，它返回一个包含字符串的list，比如，获得一个str对象的所有属性和方法    
进一步的，使用```getattr()```、```setattr()```以及```hasattr()```,可以直接操作一个对象的状态，测试对象的属性    

## 实例属性和类属性 
给实例绑定属性的方法是通过实例变量，或者通过self变量，如果Student类本身需要绑定一个属性呢？可以直接在class中定义属性，这种属性是类属性，归Student类所有，如：   
```py
class Student(object):
    name = 'Student'    
``` 
实例属性优先级比类属性高，因此，它会屏蔽掉类的name属性  
```py
>>> class Student(object):
...     name = 'Student'
...
>>> s = Student() # 创建实例s
>>> print(s.name) # 打印name属性，因为实例并没有name属性，所以会继续查找class的name属性
Student
>>> print(Student.name) # 打印类的name属性
Student
>>> s.name = 'Michael' # 给实例绑定name属性
>>> print(s.name) # 由于实例属性优先级比类属性高，因此，它会屏蔽掉类的name属性
Michael
>>> print(Student.name) # 但是类属性并未消失，用Student.name仍然可以访问
Student
>>> del s.name # 如果删除实例的name属性
>>> print(s.name) # 再次调用s.name，由于实例的name属性没有找到，类的name属性就显示出来了
Student
``` 

