# 高级特性

## 列表生成器

###  介绍
列表生成式即List Comprehensions，是Python内置的非常简单却强大的可以用来创建list的生成式 

我们在之前已经见识过它了:
要生成list [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
可以用list(range(1, 11)),表示生成1到11的数字组成的列表，依旧是左闭右开，所以在list中可以得到从1到10的数     

### 实际应用
如果想要生成$x^2$组成的1-10的数字的list，可以配合for in 写作:
```Python
>>> [x*x for x in range(1,11)]
[1,4,9,16,25,36,49,64,81,100]
```
> 写列表生成式时，把要生成的元素x * x **放到前面**，后面跟for循环，就可以把list创建出来 

在写列表生成式的时候，还可以在for in 中跟判断，辅助我们进行筛选 
```Python
>>> [x*x for x in range(1,11) if x % 2 == 0 ]
[4,16,36,64,100]
```

利用两次循环组成全排列:
```Python
>>> [m + n for m in 'ABC' for n in 'XZ']
['AX', 'AY', 'AZ', 'BX', 'BY', 'BZ', 'CX', 'CY', 'CZ']
```

因为for循环可以同时使用两个甚至多个变量，因此我们在列表生成式里面也可以利用这个特性：

用两个变量生成list:
```Python
>>> d = {'x':'A' , 'y':'B','z':'C'}
>>> [k + '=' + v for k,v in d.items()]
['y=B', 'x=A', 'z=C']
``` 
这里的```k + '=' + v ```放置在前，代表我们想生成一个list，而后面的迭代则反应了需要这么得到这个list

### 列表生成式中的if-else
在一个列表生成式中，for前面的if ... else是表达式，而for后面的if是过滤条件，不能带else   

过滤条件我们知道了，就是用来筛选结果的语句，在生成式后面
```Python
>>> [x for x in range(1, 11) if x % 2 == 0]
[2, 4, 6, 8, 10]
```

而在生成式之前的，比如```x if x % 2 == 0```是不行的，我想要得到一个"x % 2 == 0"的x,那要是"x % 2 != 0"怎么办？这个语句并没有给出处理方式，因此是错误的。
所以说我们在生成式**之前**的**表达式**中，需要的是一个**完整的if-else**语句 
```x if x % 2 == 0 else -x```

完整的示例即是:
```Python
>>> [x if x % 2 == 0 else -x for x in range(1, 11)]
[-1, 2, -3, 4, -5, 6, -7, 8, -9, 10]
```
它的意思是：在1-10中，如果x是偶数，则添加x至列表中，如果x是奇数，则添加-x到列表中   