# 字符串

## 初识

### 字符数组和字符串
字符数组和字符串不同，在C语言中二者是不同的

这是一个字符数组:```char word[] = {'H','e','l','l','o','!'}```
而这是一个字符串:```char word[] = {'H','e','l','l','o','!','\0'}``` 
二者的区别在于，我们在初始化该数组的过程中，用一个 **\0** 结尾  
如此一来，字符串的单元总数会比字符数多一，也就是多了一个0   
> 字符串是一个"字符数组"，而因为末尾的"\0"，它变成了C语言中的字符串 

### 字符串
是以0(整数0)结尾的一串字符，值得一提的是**0和'\0'是一样的，但和'0'不同**   
0标志着字符串的结束，但是它自身并不是字符串的一部分，计算字符串长度的时候不包含这个0    
字符串以数组的形式存在，以数组或者指针的形式访问(更多时候是以指针的形式)    
> string.h 里有很多处理字符串的函数 

#### 字符串变量
表达一个变量是字符串，有以下写法:
```C
char *str = "Hello" ; 
char word[] = "Hello" ; 
char line[10] = "Hello" ; 
```
用双引号括起来的部分，被称为字符串的字面量  
两个相连的字符串常量会被自动连起来  
```C
printf("这里是一个例子，"
        "相邻的字符串会被自动连接") ;
```

### 小结
C语言的字符串是以字符数组的形态存在的   
不可以用运算符对字符串做运算    
通过数组的方式可以遍历字符串    
字符串的字面量可以用来初始化字符数组    

## 字符串变量

### 地址
当我们定义了两个完全一样的字符串时，它们实际上位于同一地址上    
```C
int main(void) 
{
    char* s = "Hello , world" ;
    char* s2 = "Hello , world" ; 

    printf("s = %p \n" , s) ;
    printf("s2 = %p \n" , s2) ;
    printf("Here! s[0] = %c \n" , s[0]);

    return 0;
}
```

事实上，s1和s2指向的地方位于程序的**代码段**,而且这一部分的内容都是**只读的**   
也就是说，我们是无法在此修改字符串的    

```char* s = "Hello , world!" ; ```
此时s是一个指针，其初始化为指向一个字符串常量——而这个常量所在的地方是只读的区域 
> 实际上s是const char* s ，由于历史原因，编译器接受不带const的写法。但是试图对s指向的字符串做写入则会导致严重后果       

#### 修改数组
如果想修改字符串，则应该应用数组来定义        
```char s[] = "Hello , world!" ; ```    
而此时字符串的意义变为"所要的字符串就在此处"，而非char* s 表示的"指向了某个地方的字符串"        
```C
int main(void){
    int i = 0 ;
    char* s = "Hello , world!" ; 
    char s3 [] = "Hello , world!" ; 

    printf("&i=%p" , &i);
    printf("s = %p \n" , s) ; 
    printf("s3 = %p \n" , s3);

    s3[0] = 'B' ; 
    printf("This Time, s3[0] = %c \n " , s3[0]);

    return 0 ; 
}
```

#### 区别
指针： 不知道字符串具体位置，可以处理参数(数组作为参数时是和指针等同的)，可以动态分配空间             
数组： 字符串就在当前位置，可以动态修改，作为本地变量空间自动被回收   

**如果要处理一个字符串，就用指针**      
**如果要构造一个字符串，就用数组**      

字符串可以表达为```char*```的形式，而```char*```不一定是字符串  
其本意是指向字符串的指针，可能指向的是字符的数组        
> 只有其所指的字符数组有结尾的0，才能认为它指向的是字符串       

## 字符串的输入输出     

### 字符串赋值
字符串的赋值实际上**并没有产生新的字符串**，只是让被赋值的指针指向了对应的区域
```c
char *t = "title" ; 
char *s ; 
s = t ;
```
此处并没有产生性的字符串，而只是让指针s指向了t所指的字符串，对s的任何操作都是对t做的    

### 字符串输入输出      
```C
char string[8] ; 
scanf("%s" , string) ; 
printf("%s" , string) ; 
```
scanf会读入一个单词，到**空格,tab,回车为止**    
scanf是不安全的，因为其不知道要读入的内容的长度 

我们可以在```%```和```s```中间限定读取的数量    
```scanf("%7s" , word) ; ```    
这个数字表示了**最多允许读入的字符的数量**，这个数字应该比数组大小小1，因为字符串数组的末尾固定为0      

> 另外，在声明字符串的时候，需要初始化为0以免出错     

char buffer[100] = "" ; 此时这是一个空字符串，而buffer[0] == '\0'       
char buffer[] = "" ;  此时这个数组的长度只有1   

## 字符串数组与程序参数 

### 字符串数组
有两种方式表示字符串数组

#### char[][X]
代表的是一个字符串数组，每一个字符串的大小至多为X(有X-1字符)    
可以认为是把一个个“数组型的字符串”放置到了数组里面，比如        
a[0] == world\0 
a[1] == Hello\0

#### char* a[] 
表示数组a[]里面存放了各个字符串(的地址) 
a[0] ->地址1 ->指向"Hello\0"    
a[1] ->地址2 ->指向"World\0"    

两种方式是不一样的

### 程序参数    
可以作为```main```函数的参数，比如
```int main(int argc , char const *argv[])```
其中argv[0]是命令本身   
> 当使用Unix的符号链接时，反映符号链接的名字    