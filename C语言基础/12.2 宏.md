# 宏

## 宏定义   

### 编译预处理指令
以```#```开头的是编译预处理指令 
它们不是C语言的成分，但是C语言程序离不开它们    
使用```#define```来定义一个**宏**   
注意，后面不用接上分号  
**绝对不能加分号**，在替换后及其容易影响到代码  

``` #define <符号的名字> <符号的值>```，比如    
```#define PI 3.14159```

```#define```所做的就是最原始的“替换”   
也就是在预处理的时候，把下面代码中的<符号的名字>全部替换为<符号的值>    
> 在C语言的编译器还是编译之前，编译预处理程序(CPP)会把程序中的名字换成值
> 是完全的文本替换
名字必须是一个单词，而值可以是各种东西  

### 使用
如果一个宏的值中有其他宏的名字，也是会被替换的  
如果一个宏的值超过一行，最后一行之前的行末需要加```\``` 
宏的值后面出现的注释不会被当作宏的值的一部分    

```
#define PI 3.14
#define PI2 2*PT //这里是注释
```
最终的结果会变成    把PI2变成2*3.14 

#### 没有值的宏
```#define _DEBUG```
这类宏是用于条件编译的，后面有其他的编译预处理指令来检查这个宏是各已经被定义过了    


## 带参数的宏   

### 例子
```#define cube(x) ((x)*(x)*(x))```
举个例子，此时我们写:
```c
#define cube(x) ((x)*(x)*(x)) 
int main(){
    printf("%d \n" , cube(5)) ; 
    
    return 0 ;
}
```
此时对于cube(5)，在过程中有以下变化
```cube(5)->((5)*(5)*(5))->75```    

在书写这类宏的时候，要非常注意书写的值，小括号的使用  
**要考虑代码中其替换后的结果**  

### 带参数的宏的原则
一切都要括号    
整个值最终使用一个括号  
参数出现的每个地方都有括号  

这样可以大量避免上文说的错误    

### 补充
带参数的宏也可以带多个参数  
也可以组合/嵌套来使用其他宏 

### 小结
带参数的宏在大型程序的代码中使用普遍，可以以空间换取效率    
宏是没有任何类型检查的  
部分宏会被inline函数来替代  