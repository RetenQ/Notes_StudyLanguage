# 基础补充：程序基础

### 格式化代码
Eclipse IDE提供了快捷键Ctrl+Shift+F（macOS是⌘+⇧+F）帮助我们快速格式化代码的功能 
Eclipse就是按照约定的编码格式对代码进行格式化的，所以只需要看看格式化后的代码长啥样就行了   
具体的代码格式要求可以在Eclipse的设置中Java-Code Style查看

### 数据类型与字节
![](https://i.loli.net/2021/10/22/fMje73xgJ2U4okq.png)  

整数
byte：-128 ~ 127
short: -32768 ~ 32767
int: -2147483648 ~ 2147483647
long: -9223372036854775808 ~ 9223372036854775807
> 整数由于存在范围限制，如果计算结果超出了范围，就会产生溢出，而溢出不会出错，却会得到一个奇怪的结果    

浮点数
浮点类型的数就是小数，因为小数用科学计数法表示的时候，小数点是可以“浮动”的  
如1234.5可以表示成$12.345*10^2$，也可以表示成 $1.2345*10^3$，所以称为浮点数    

对于float类型，需要加上f后缀    
浮点数可表示的范围非常大，float类型可最大表示```3.4*10^38```，而double类型可最大表示```1.79X10^308```

字符
字符类型char表示一个字符。Java的char类型除了可表示标准的ASCII外，还可以表示一个Unicode字符  

引用类型
除了上述基本类型的变量，剩下的都是引用类型，常见的就是String    

整数的数值表示不但是精确的，而且整数运算永远是精确的，即使是除法也是精确的，因为两个整数相除只能得到结果的整数部分
> 另外，整数的除法对于除数为0时运行时将报错，但编译不会报错 

### 数据类型——其它  

#### final 
定义变量的时候，如果加上final修饰符，这个变量就变成了常量   
常量在定义时进行初始化后就不可再次赋值，再次赋值会导致编译错误  

#### var
有些时候，类型的名字太长，写起来比较麻烦;这个时候，如果想省略变量类型，可以使用var关键字    
```Java
StringBuilder sb = new StringBuilder();
//可以直接写作
var sb = new StringBuilder();
```
编译器会根据赋值语句自动推断出变量sb的类型是StringBuilder   

#### ++ --  
注意++写在前面和后面计算结果是不同的，++n表示先加1再引用n，n++表示先引用n再加1  
不建议把++运算混入到常规运算中，容易自己把自己搞懵了,一般在循环和条件更新的时候用一下就好了 

#### 移位运算
在计算机中，整数总是以二进制的形式表示,我们可以利用```>>>```和```<<<```进行移位运算 

```Java
int n = 7;       // 00000000 00000000 00000000 00000111 = 7
int a = n << 1;  // 00000000 00000000 00000000 00001110 = 14
int b = n << 2;  // 00000000 00000000 00000000 00011100 = 28
int c = n << 28; // 01110000 00000000 00000000 00000000 = 1879048192
int d = n << 29; // 11100000 00000000 00000000 00000000 = -536870912

```

同理
```
int n = 7;       // 00000000 00000000 00000000 00000111 = 7
int a = n >> 1;  // 00000000 00000000 00000000 00000011 = 3
int b = n >> 2;  // 00000000 00000000 00000000 00000001 = 1
int c = n >> 3;  // 00000000 00000000 00000000 00000000 = 0
``` 

如果对一个负数进行右移，最高位的1不动，结果仍然是一个负数:
```Java
int n = -536870912;
int a = n >> 1;  // 11110000 00000000 00000000 00000000 = -268435456
int b = n >> 2;  // 11111000 00000000 00000000 00000000 = -134217728
int c = n >> 28; // 11111111 11111111 11111111 11111110 = -2
int d = n >> 29; // 11111111 11111111 11111111 11111111 = -1
``` 

无符号右移>>> 
它的特点是不管符号位，右移后高位总是补0，因此，对一个负数进行>>>右移，它会变成正数，原因是最高位的1变成了0  

> 对byte和short类型进行移位时，会首先转换为int再进行位移
> 仔细观察可发现，左移实际上就是不断地×2，右移实际上就是不断地÷2。

### 位运算
```
n = 0 & 0; // 0
n = 0 & 1; // 0
n = 1 & 0; // 0
n = 1 & 1; // 1

//-------------
n = 0 | 0; // 0
n = 0 | 1; // 1
n = 1 | 0; // 1
n = 1 | 1; // 1

//-------------
n = ~0; // 1
n = ~1; // 0

//-------------
n = 0 ^ 0; // 0
n = 0 ^ 1; // 1
n = 1 ^ 0; // 1
n = 1 ^ 1; // 0

```
对两个整数进行位运算，实际上就是按位对齐，然后依次对每一位进行运算。例如：
```Java
public class Main {
    public static void main(String[] args) {
        int i = 167776589; // 00001010 00000000 00010001 01001101
        int n = 167776512; // 00001010 00000000 00010001 00000000
        System.out.println(i & n); // 167776512
    }
}
```

### 表达式运算高低

![](https://i.loli.net/2021/10/22/lYm98u4diI2zSP7.png)

### 三元运算符  

Java还提供一个三元运算符b ? x : y，它根据第一个布尔表达式的结果，分别返回后续两个表达式之一的计算结果   

```Java
public class Main {
    public static void main(String[] args) {
        int n = -100;
        int x = n >= 0 ? n : -n;
        System.out.println(x);
    }
}
``` 

> 三元运算也是“短路运算”，只计算x或y    

### 字符串和字符
因为Java在内存中总是使用Unicode表示字符 
所以，一个英文字符和一个中文字符都用一个char类型表示，它们都占用两个字节    
另外，要显示一个字符的Unicode编码，只需将char类型直接赋值给int类型即可  

还可以直接用转义字符\u+Unicode编码来表示一个字符
```char c3 = '\u0041'; // 'A' ```   

如果字符串本身恰好包含一个"字符,例如，"abc"xyz" 
编译器就无法判断中间的引号究竟是字符串的一部分还是表示字符串结束   这个时候，我们需要借助转义字符\  

> 因为\是转义字符，所以，两个反斜杆表示一个\字符：

![](https://i.loli.net/2021/10/23/VQrK4TuhMp1jAJe.png)  

